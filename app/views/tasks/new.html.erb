<h3 class="font-serif text-4xl sm:text-5xl font-black text-primary text-center my-5">Create New Task</h3>

<%= turbo_frame_tag 'new_task' do %>
  <dialog class="p-0 rounded-2xl w-full max-w-[48rem]" data-controller="dialog" data-dialog-keep-value="true" data-action="click->dialog#close" data-turbo-temporary>
    <div class="w-full h-full p-5" data-action="click->dialog#stay">
      <h4 class="font-extralight mb-5 text-3xl">New Task</h4>
      <%= form_with model: @task, method: :post, data: { dialog_target: 'form' }  do |form| %>
        <%= form.hidden_field :project_id, value: @project.id %>
        <div>
          <%= form.label :title, 'Task Title', class: 'block font-bold' %>
          <%= form.text_field :title, class: 'bg-gray-200 appearance-none border border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-primary' %>
          <% if @task.errors.full_messages_for(:title).any? %>
            <p class="text-xs text-red-500 mt-1"><%= @task.errors.full_messages_for(:title).first %></p>
          <% end %>
        </div>

        <div class="mt-5">
          <%= form.label :description, class: 'block font-bold' %>
          <%= form.rich_text_area :description %>
          <% if @task.errors.full_messages_for(:description).any? %>
            <p class="text-xs text-red-500 mt-1"><%= @task.errors.full_messages_for(:description).first %></p>
          <% end %>
        </div>

        <div class="mt-5">
          <%= form.label :priority, class: 'block font-bold' %>
          <%= form.select :priority, [['Standard', 'standard'], ['Important', 'important'], ['Urgent', 'urgent']], {}, { class: 'bg-gray-200 appearance-none border border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-primary' } %>
        </div>

        <div class="mt-5">
          <%= form.label :user_id, 'Assign to:', class: 'block font-bold' %>
          <%= form.select :user_id, User.select([:first_name, :last_name, :id]).map{ |user| [user.full_name, user.id] }, {}, { class: 'bg-gray-200 appearance-none border border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-primary' } %>
        </div>

        <div class="text-right">
          <%= form.submit 'Create Task', class: 'bg-primary text-white font-bold rounded-full px-5 py-2 mt-5' %>
        </div>
      <% end %>
    </div>
  </dialog>
<% end %>
